{"ast":null,"code":"export const FETCH_POKEMON_LIST_REQUEST = 'FETCH_POKEMON_LIST_REQUEST';\nexport const FETCH_POKEMON_LIST_SUCCESS = 'FETCH_POKEMON_LIST_SUCCESS';\nexport const FETCH_POKEMON_LIST_FAILURE = 'FETCH_POKEMON_LIST_FAILURE';\nexport const FETCH_EVOL_REQUEST = 'FETCH_POKEMON_LIST_REQUEST';\nexport const FETCH_EVOL_SUCCESS = 'FETCH_POKEMON_LIST_SUCCESS';\nexport const FETCH_EVOL_FAILURE = 'FETCH_POKEMON_LIST_FAILURE';\nconst updatePokemonList = list => {\n  return {\n    type: FETCH_POKEMON_LIST_SUCCESS,\n    payload: list\n  };\n};\nasync function getAllDataForPokemonList(list) {\n  let completed_list = [];\n  for (let e of list) {\n    const res = await fetch(e.url);\n    if (!res.ok) {\n      throw new Error('Error in request');\n    } //single pokemon has url for fetching its main info (sort of mongo populate)\n    const pokemonData = await res.json();\n    completed_list.push(pokemonData);\n  }\n  return completed_list;\n}\nexport const fetchPokemonList = () => {\n  return async dispatch => {\n    dispatch({\n      type: FETCH_POKEMON_LIST_REQUEST\n    });\n    try {\n      const res = await fetch('https://pokeapi.co/api/v2/pokemon/');\n      if (!res.ok) {\n        throw new Error('Error in request');\n      }\n      const list = await res.json();\n      const completed_list = await getAllDataForPokemonList(list.results || []);\n      dispatch(updatePokemonList(completed_list));\n    } catch (error) {\n      dispatch({\n        type: FETCH_POKEMON_LIST_FAILURE,\n        payload: error.message\n      });\n    }\n  };\n};\nfunction findEvolution(chain, evol) {\n  if (evol && evol.species && evol.species.url) {\n    chain.push(evol.species.url);\n  }\n  if (evol && evol.evolves_to) {\n    for (let ev of evol.evolves_to) {\n      chain = findEvolution(chain, ev);\n    }\n  }\n  return chain;\n}\nconst updatePokemonInfo = chain => {\n  return {\n    type: FETCH_EVOL_SUCCESS,\n    payload: chain\n  };\n};\nexport const fetchEvolutionChain = id => {\n  return async dispatch => {\n    dispatch({\n      type: FETCH_EVOL_REQUEST\n    });\n    try {\n      var _specie$evolution_cha;\n      const res = await fetch('https://pokeapi.co/api/v2/pokemon-species/' + id);\n      if (!res.ok) {\n        throw new Error('Error in request');\n      }\n      const specie = await res.json();\n      const evol = await fetch(specie === null || specie === void 0 ? void 0 : (_specie$evolution_cha = specie.evolution_chain) === null || _specie$evolution_cha === void 0 ? void 0 : _specie$evolution_cha.url);\n      if (!evol.ok) {\n        throw new Error('Error in request');\n      }\n      const evolObj = await evol.json();\n      let chain = [];\n      chain = findEvolution(chain, evolObj.chain);\n      dispatch(updatePokemonInfo(chain));\n    } catch (error) {\n      dispatch({\n        type: FETCH_EVOL_FAILURE,\n        payload: error.message\n      });\n    }\n  };\n};","map":{"version":3,"names":["FETCH_POKEMON_LIST_REQUEST","FETCH_POKEMON_LIST_SUCCESS","FETCH_POKEMON_LIST_FAILURE","FETCH_EVOL_REQUEST","FETCH_EVOL_SUCCESS","FETCH_EVOL_FAILURE","updatePokemonList","list","type","payload","getAllDataForPokemonList","completed_list","e","res","fetch","url","ok","Error","pokemonData","json","push","fetchPokemonList","dispatch","results","error","message","findEvolution","chain","evol","species","evolves_to","ev","updatePokemonInfo","fetchEvolutionChain","id","_specie$evolution_cha","specie","evolution_chain","evolObj"],"sources":["/Users/amedeofresia/Documents/Lavoro/React Test/PokeApp/poke-app/src/store/actions/pokemon.js"],"sourcesContent":["export const FETCH_POKEMON_LIST_REQUEST = 'FETCH_POKEMON_LIST_REQUEST';\nexport const FETCH_POKEMON_LIST_SUCCESS = 'FETCH_POKEMON_LIST_SUCCESS';\nexport const FETCH_POKEMON_LIST_FAILURE = 'FETCH_POKEMON_LIST_FAILURE';\n\nexport const FETCH_EVOL_REQUEST = 'FETCH_POKEMON_LIST_REQUEST';\nexport const FETCH_EVOL_SUCCESS = 'FETCH_POKEMON_LIST_SUCCESS';\nexport const FETCH_EVOL_FAILURE = 'FETCH_POKEMON_LIST_FAILURE';\n\nconst updatePokemonList = (list) => {\n    return {\n        type: FETCH_POKEMON_LIST_SUCCESS,\n        payload: list\n    }\n}\n\nasync function getAllDataForPokemonList(list) {\n    let completed_list = [];\n    for(let e of list) {\n        const res = await fetch(e.url); \n        if (!res.ok) {\n            throw new Error('Error in request');\n        }  //single pokemon has url for fetching its main info (sort of mongo populate)\n        const pokemonData = await res.json()\n        completed_list.push(pokemonData);\n    }\n\n    return completed_list;\n}\n\nexport const fetchPokemonList = () => {\n    return async dispatch => {\n        dispatch({ type: FETCH_POKEMON_LIST_REQUEST });\n        try {\n            const res = await fetch('https://pokeapi.co/api/v2/pokemon/');\n            if (!res.ok) {\n                throw new Error('Error in request');\n            }    \n            const list = await res.json();\n            const completed_list = await getAllDataForPokemonList(list.results || [])\n            dispatch(updatePokemonList(completed_list));\n        }     \n        catch (error) {\n            dispatch({ type: FETCH_POKEMON_LIST_FAILURE, payload: error.message });\n        }    \n    }    \n}; \n\nfunction findEvolution(chain, evol) {\n    if(evol && evol.species && evol.species.url){\n        chain.push(evol.species.url)\n    }\n    if(evol && evol.evolves_to){\n        for(let ev of evol.evolves_to){\n            chain = findEvolution(chain, ev)\n        }\n    }\n    return chain;\n}\n\nconst updatePokemonInfo = (chain) => {\n    return {\n        type: FETCH_EVOL_SUCCESS,\n        payload: chain\n    }\n}\n\n\nexport const fetchEvolutionChain = (id) => {\n    return async dispatch => {\n        dispatch({ type: FETCH_EVOL_REQUEST });\n        try {\n            const res = await fetch('https://pokeapi.co/api/v2/pokemon-species/'+id);\n            if (!res.ok) {\n                throw new Error('Error in request');\n            }    \n            const specie = await res.json();\n            const evol = await fetch(specie?.evolution_chain?.url)\n            if (!evol.ok) {\n                throw new Error('Error in request');\n            }  \n            const evolObj = await evol.json();\n            let chain = [];\n            chain = findEvolution(chain, evolObj.chain)\n\n            dispatch(updatePokemonInfo(chain))\n        \n        }     \n        catch (error) {\n            dispatch({ type: FETCH_EVOL_FAILURE, payload: error.message });\n        }    \n    }     \n}\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}